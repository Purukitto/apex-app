---
description: Global coding standards and UI/UX rules for Apex
globs: ["src/**/*.{ts,tsx}"]
alwaysApply: true
---

# Apex Core Rules

## UI/UX Standards
- Always use **Tailwind CSS**.
- Backgrounds must be `bg-apex-black`.
- Telemetry/Numbers must use `font-mono` (JetBrains Mono).
- Use `lucide-react` for all iconography.
- Favor `framer-motion` for subtle, high-end transitions.

## Code Standards
- Use **TypeScript** with strict type checking.
- Prefer Functional Components and Hooks.
- Centralize state using **Zustand**.
- Fetch data using **TanStack Query** (React Query).
- Logic for "Ride Recording" must check for mobile platform using Capacitor.
- Prefer shared utilities for common logic (dates, durations, formatting). If logic is reused in 2+ places, extract it into `src/utils/` or an existing shared module.

## Logging Standards
- **MANDATORY**: Always use `logger` from `src/lib/logger.ts` instead of `console.*` methods.
- **NEVER** use `console.log`, `console.error`, `console.warn`, `console.info`, `console.debug`, or `console.trace` directly.
- **Import**: `import { logger } from '../lib/logger'` or `import logger from '../lib/logger'`
- **Usage**:
  - `logger.trace()` - Very detailed debugging (rarely used)
  - `logger.debug()` - Debug information (development)
  - `logger.info()` - General information
  - `logger.warn()` - Warnings
  - `logger.error()` - Errors (always flushed immediately)
- **Benefits**: All logs are captured in devtools console AND persisted to session files on native platforms.
- **Exporting Logs**: Use DevTools panel download button to export logs (native: share, web: download).
- **Exceptions**: Only `logger.ts` itself may use console.* as fallback when file logging fails.

## Mobile-Only Logic
- All components in `src/pages/Recorder.tsx` must be wrapped in a platform check.
- Use `Capacitor.getPlatform()` to detect 'ios' or 'android'.
- If the platform is 'web', render a "Mobile Only" fallback view with a QR code to download the app.
- Never initialize GPS or Motion listeners if `Capacitor.isNativePlatform()` is false.