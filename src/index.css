@import "tailwindcss";

@theme {
  /* Base Colors */
  --color-apex-black: #0A0A0A;
  --color-apex-white: #E2E2E2;
  
  /* Data Accent Colors */
  --color-apex-green: #bef264;
  --color-apex-red: #FF3B30;
  
  /* Bento Grid Design Tokens */
  --spacing-apex: 1.5rem;
  --radius-apex: 2.5rem;
}

/* Safe Area Insets - for notches and punch-holes */
:root {
  --safe-area-inset-top: env(safe-area-inset-top, 0px);
  --safe-area-inset-right: env(safe-area-inset-right, 0px);
  --safe-area-inset-bottom: env(safe-area-inset-bottom, 0px);
  --safe-area-inset-left: env(safe-area-inset-left, 0px);
}

/* Global dark background - will be overridden by theme */
html,
body {
  background-color: var(--color-apex-black, #0A0A0A);
  margin: 0;
  padding: 0;
}

/* Sonner Toast Styling for Apex */
[data-sonner-toast] {
  background: var(--color-apex-black, #0A0A0A) !important;
  border: 1px solid rgba(255, 255, 255, 0.2) !important;
  color: var(--color-apex-white, #E2E2E2) !important;
  font-family: inherit !important;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.5) !important;
  margin-bottom: 0 !important;
  opacity: 1 !important;
  transform: translateX(0) !important;
}

/* Ensure stacked toasts maintain visibility with proper spacing */
[data-sonner-toaster] {
  --width: 356px;
  --toast-gap: 8px;
  /* Respect safe area insets for top-center positioning */
  top: calc(1rem + env(safe-area-inset-top, 0px)) !important;
  /* Ensure toasts are always on top of all content - higher than any fixed containers */
  z-index: 99999 !important;
  /* Ensure toaster portal is rendered at root level */
  position: fixed !important;
}

/* Stacking behavior - ensure each toast is visible and properly spaced */
[data-sonner-toast] + [data-sonner-toast] {
  margin-top: 8px !important;
}

/* Type-specific border colors */
[data-sonner-toast][data-type="success"] {
  border-color: var(--color-apex-green, #00FF41) !important;
}

[data-sonner-toast][data-type="error"] {
  border-color: var(--color-apex-red, #FF3B30) !important;
}

[data-sonner-toast] [data-description] {
  color: var(--color-apex-white, #E2E2E2) !important;
}

/* Ensure toast content is visible and properly styled */
[data-sonner-toast] [data-title] {
  color: var(--color-apex-white, #E2E2E2) !important;
  opacity: 1 !important;
  visibility: visible !important;
}

[data-sonner-toast] [data-content] {
  color: var(--color-apex-white, #E2E2E2) !important;
  opacity: 1 !important;
  visibility: visible !important;
}

/* Ensure toast text content is visible - target all possible content containers */
[data-sonner-toast] > div,
[data-sonner-toast] > div > div,
[data-sonner-toast] [data-content] > *,
[data-sonner-toast] [data-title] > * {
  opacity: 1 !important;
  visibility: visible !important;
  color: inherit !important;
}

/* Ensure toast message text is visible */
[data-sonner-toast] p,
[data-sonner-toast] span,
[data-sonner-toast] div {
  color: var(--color-apex-white, #E2E2E2) !important;
  opacity: 1 !important;
}

/* Prevent toast text overflow - wrap long messages */
[data-sonner-toast] [data-title],
[data-sonner-toast] [data-content],
[data-sonner-toast] p,
[data-sonner-toast] span {
  word-wrap: break-word !important;
  overflow-wrap: break-word !important;
  max-width: 100% !important;
  overflow: hidden !important;
  text-overflow: ellipsis !important;
  display: -webkit-box !important;
  -webkit-line-clamp: 3 !important;
  -webkit-box-orient: vertical !important;
  line-height: 1.4 !important;
}

/* Ensure toasts maintain their individual styling when stacked */
[data-sonner-toast] {
  position: relative !important;
  isolation: isolate !important;
  /* Ensure individual toasts also have high z-index - higher than any fixed containers */
  z-index: 99999 !important;
}

/* Prevent toasts from merging visually when stacked */
[data-sonner-toaster] [data-sonner-toast] {
  backdrop-filter: none !important;
}

/* Ensure numbers use font-mono in toasts */
[data-sonner-toast] .font-mono {
  font-family: 'JetBrains Mono', monospace;
}

/* Shimmer animation for skeleton loaders */
@keyframes shimmer {
  0% {
    transform: translateX(-100%);
  }
  100% {
    transform: translateX(100%);
  }
}

.animate-shimmer {
  animation: shimmer 2s infinite;
  background: linear-gradient(
    90deg,
    transparent 0%,
    transparent 40%,
    rgba(255, 255, 255, 0.1) 50%,
    transparent 60%,
    transparent 100%
  );
  background-size: 200% 100%;
}

/* Theme-aware hover border using highlight color */
.hover-border-theme {
  transition: border-color 0.2s ease;
}

.hover-border-theme:hover {
  border-color: var(--color-apex-green-highlight, rgba(114, 145, 60, 0.4)) !important;
}

/* Apex Dark Map Style - Inverts OSM tiles to dark theme */
.dark-map-tiles {
  filter: invert(100%) hue-rotate(180deg) brightness(95%) contrast(90%);
}

/* Leaflet Map Z-Index Isolation - Prevent map from appearing over modals */
/* Create a stacking context for map containers to isolate Leaflet's z-index */
.leaflet-container {
  isolation: isolate;
  position: relative;
  z-index: 1;
}

/* Ensure Leaflet controls stay within the map's stacking context */
.leaflet-control-container {
  position: relative;
  z-index: 2;
}

/* Hide Leaflet attribution control - attribution moved to Profile page */
.leaflet-control-attribution {
  display: none !important;
}

/* Allow page scrolling through non-interactive maps */
.map-non-interactive,
.map-non-interactive * {
  pointer-events: none !important;
  touch-action: pan-y !important;
}